schema: '2.0'
stages:
  generate_data:
    cmd: python src/stages/generate_synthetic_data.py
    deps:
    - path: src/stages/generate_synthetic_data.py
      hash: md5
      md5: 882311df1dadc3c1bc2c6bc27b4e81c3
      size: 2526
    - path: src/utilities/utils.py
      hash: md5
      md5: 2c4371654f79fc1d4f73f7e771a31611
      size: 98255
    params:
      params.yaml:
        data:
          n_samples: 1000
          spacing: 50
          depth: -500
          n_features: 7
          n_classes: 5
          threshold_binary: 0.5
          min_samples_per_class: 20
          connection_radius: 150
          n_splits: 2
          test_size: 0.3
          calib_size: 0.5
          seed: 10
    outs:
    - path: results/data
      hash: md5
      md5: e3af67aaddd35b4c8a3e1b00461c0b01.dir
      size: 29470482
      nfiles: 8
  train:
    cmd: python src/stages/train.py --model gcn
    deps:
    - path: results/data
      hash: md5
      md5: e3af67aaddd35b4c8a3e1b00461c0b01.dir
      size: 29470482
      nfiles: 8
    - path: src/models/
      hash: md5
      md5: 94dea62ac7af3b278224b13966558cbe.dir
      size: 23815
      nfiles: 10
    - path: src/stages/train.py
      hash: md5
      md5: 6ef819cd1d2833cf310bbe5ce4d80e8c
      size: 12278
    - path: src/utilities/utils.py
      hash: md5
      md5: 2c4371654f79fc1d4f73f7e771a31611
      size: 98255
    params:
      params.yaml:
        model: gcn
        models.gcn:
          hidden_channels: 64
          n_layers: 3
          dropout: 0.3
          batch_norm: true
        train:
          n_epochs: 1000
          lr: 0.001
          max_grad_norm: 1.0
          weight_decay_adam_optimizer: 0.0005
          factor_learning_rate_scheduler: 0.5
          patience_learning_rate_scheduler: 20
          patience_early_stopping: 50
          min_delta_early_stopping: 0.001
          seed: 40
    outs:
    - path: results/trained
      hash: md5
      md5: f1eb3f8679741d19a403fc46f5ab9c4d.dir
      size: 1473456
      nfiles: 3
  evaluate:
    cmd: python src/stages/evaluate.py --model gcn
    deps:
    - path: results/trained
      hash: md5
      md5: f1eb3f8679741d19a403fc46f5ab9c4d.dir
      size: 1473456
      nfiles: 3
    - path: src/stages/evaluate.py
      hash: md5
      md5: 0a38cf4571d41156435f39112ba28d3b
      size: 11508
    - path: src/utilities/utils.py
      hash: md5
      md5: 2c4371654f79fc1d4f73f7e771a31611
      size: 98255
    params:
      params.yaml:
        evaluate:
          initial_temperature: 1.1
          n_bins: 10
          class_names:
          - low
          - medium-low
          - medium
          - medium-high
          - high
          calibration_method: dirichlet
          n_epochs: 1000
          lr: 0.001
          weight_decay_adam_optimizer: 0.0005
          verbose: true
          factor_learning_rate_scheduler: 0.4
          patience_learning_rate_scheduler: 20
          patience_early_stopping: 50
          min_delta_early_stopping: 0.001
          reg_lambda: 0.01
          reg_mu: 0.01
          eps: 1e-08
          seed: 40
    outs:
    - path: results/evaluation
      hash: md5
      md5: 9318284799fc731b2390b3c20808362f.dir
      size: 437657
      nfiles: 6
