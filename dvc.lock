schema: '2.0'
stages:
  generate_data:
    cmd: python src/stages/generate_synthetic_data.py
    deps:
    - path: src/stages/generate_synthetic_data.py
      hash: md5
      md5: 898bdf49c295f17b3b68d5a44919df9c
      size: 14555
    params:
      params.yaml:
        data:
          origin:
          - 657161
          - 688292
          - 0
          x_spacing: 2.5
          y_spacing: 2.5
          z_spacing: 2.5
          x_length: 50
          y_length: 50
          z_depth: 40
          n_features: 4
          n_classes: 5
          d_threshold: 5
          edge_dim: 2
          n_splits: 5
          test_size: 0.3
          calib_size: 0.5
          seed: 40
    outs:
    - path: results/data
      hash: md5
      md5: dd8768a5d0890b107fc67f7361e4f20a.dir
      size: 111457729
      nfiles: 14
  train:
    cmd: python src/stages/train.py --model gcn
    deps:
    - path: results/data
      hash: md5
      md5: dd8768a5d0890b107fc67f7361e4f20a.dir
      size: 111457729
      nfiles: 14
    - path: src/models/
      hash: md5
      md5: 919cefede92e8759d79f32f74bf4d668.dir
      size: 24422
      nfiles: 10
    - path: src/stages/train.py
      hash: md5
      md5: f3537f08bf73f24fe2667e794a888ec4
      size: 9722
    params:
      params.yaml:
        model: gcn
        models.gcn:
          hidden_channels: 64
          n_layers: 3
          dropout: 0.3
          batch_norm: true
        train:
          n_epochs: 1000
          lr: 0.001
          max_grad_norm: 1.0
          weight_decay_adam_optimizer: 0.0005
          factor_learning_rate_scheduler: 0.5
          patience_learning_rate_scheduler: 20
          patience_early_stopping: 50
          min_delta_early_stopping: 0.001
          seed: 40
    outs:
    - path: results/trained
      hash: md5
      md5: a1832099cf9101d1e8fecb17f549f701.dir
      size: 3682431
      nfiles: 6
  evaluate:
    cmd: python src/stages/evaluate.py --model gcn
    deps:
    - path: results/data
      hash: md5
      md5: dd8768a5d0890b107fc67f7361e4f20a.dir
      size: 111457729
      nfiles: 14
    - path: results/trained
      hash: md5
      md5: a1832099cf9101d1e8fecb17f549f701.dir
      size: 3682431
      nfiles: 6
    - path: src/stages/evaluate.py
      hash: md5
      md5: 9fdb1e461502eb9d58d20019b23f911c
      size: 8165
    params:
      params.yaml:
        evaluate:
          initial_temperature: 0.9
          n_bins: 10
          class_names:
          - low
          - medium-low
          - medium
          - medium-high
          - high
          calibration_method: temperature
          n_epochs: 1000
          lr: 0.001
          weight_decay_adam_optimizer: 0.0005
          verbose: true
          factor_learning_rate_scheduler: 0.5
          patience_learning_rate_scheduler: 20
          patience_early_stopping: 50
          min_delta_early_stopping: 0.001
    outs:
    - path: results/evaluation
      hash: md5
      md5: bebd033e45bfd086907c347c48efdfcc.dir
      size: 433214
      nfiles: 6
